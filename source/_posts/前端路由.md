---
title: 前端路由
date: 2021-09-27 11:55:19
author: ZJingW
categories: 路由
description: 前端路由的原理
top_img: https://cdn.jsdelivr.net/gh/JingWZeng/markdownImg/img/202109271154262.jpg
cover: https://cdn.jsdelivr.net/gh/JingWZeng/markdownImg/img/202109271154262.jpg
tags: 
 - 前端
 - 路由
---

> 前端路由的两个基本条件
>
> 1. 改变`url`
> 2. 页面不刷新

### Hash路由

1. `hash`只作用在浏览器，不会在请求中发送给服务器。
2. `hash`发生变化时，浏览器并不会重新给后端发送请求加载页面。
3. 修改`hash`时会在浏览器留下历史记录，可以通过浏览器返回按钮回到上一个页面。
4. `hash` 发生变化时会触发 `hashchange` 事件，在该事件中可以通过 `window.location.hash` 获取到当前 hash值。

在添加路由的时候添加一个对象，包括`url`和跳转该地址的处理函数。hashchange事件可以监听`url`的变化。

### History路由

利用`H5`的`history.pushState()`和`history.replaceState()`，分别可以添加和修改历史记录。它们是与hash一样具有修改`url`的功能，之后可以通过`windows`的`onpopstate`事件，来监听`url`的变化，进而处理该`url`的处理函数。

因为`History`路由改变的是浏览器的`url`,因为`url`改变了，此时如果手动的刷新页面，浏览器会认为是请求一个新的页面，但是新的页面是不存在的(因为`url`中显示的是通过`pushstate`加的记录，实际上没有对应的页面)，肯定会报错的！

所以需要配合后端，在服务端做`url`的重定向，就是如果找不到页面，那么就重定向到`index.html`,`vue`项目本身就是单页面应用，整个系统也只有一个`html`

